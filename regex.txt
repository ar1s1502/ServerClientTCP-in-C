#include <stdio.h>
#include <regex.h>
#include <string.h>

#define MAX_GROUPS 3 // 1 for full match + 2 capturing groups
#define BUFFER_SIZE 100

int main() {
    const char* input = "Today's date is 2025-12-20.";
    // Pattern to capture year, month, and day: "([0-9]+)-([0-9]+)-([0-9]+)"
    // The pattern needs to be escaped in C string literals:
    const char* pattern_str = "([0-9]+)-([0-9]+)-([0-9]+)";
    regex_t regex;
    regmatch_t matches[MAX_GROUPS];

    // Compile the regular expression
    // Use REG_EXTENDED for modern syntax, REG_ICASE for case-insensitive
    if (regcomp(&regex, pattern_str, REG_EXTENDED) != 0) {
        fprintf(stderr, "Could not compile regex\n");
        return 1;
    }

    // Execute the regular expression
    if (regexec(&regex, input, MAX_GROUPS, matches, 0) == 0) {
        printf("Match found!\n");

        for (int i = 1; i < MAX_GROUPS; i++) {
 #include <stdio.h>
#include <regex.h>
#include <string.h>

#define MAX_GROUPS 3 // 1 for full match + 2 capturing groups
#define BUFFER_SIZE 100

int main() {
    const char* input = "Today's date is 2025-12-20.";
    // Pattern to capture year, month, and day: "([0-9]+)-([0-9]+)-([0-9]+)"
    // The pattern needs to be escaped in C string literals:
    const char* pattern_str = "([0-9]+)-([0-9]+)-([0-9]+)";
    regex_t regex;
    regmatch_t matches[MAX_GROUPS];

    // Compile the regular expression
    // Use REG_EXTENDED for modern syntax, REG_ICASE for case-insensitive
    if (regcomp(&regex, pattern_str, REG_EXTENDED) != 0) {
        fprintf(stderr, "Could not compile regex\n");
        return 1;
    }

    // Execute the regular expression
    if (regexec(&regex, input, MAX_GROUPS, matches, 0) == 0) {
        printf("Match found!\n");

        for (int i = 1; i < MAX_GROUPS; i++) {
            // Check if the group actually matched (rm_so != -1)
            if (matches[i].rm_so != -1 && matches[i].rm_eo != -1) {
                // Calculate length
                int length = matches[i].rm_eo - matches[i].rm_so;
                // Print the matched substring using format specifier for length
                printf("Group %d: %.*s\n", i, length, input + matches[i].rm_so);
            }
        }
    } else {
        printf("No match found.\n");
    }

    // Free the memory allocated to the pattern buffer by regcomp
    regfree(&regex);

    return 0;
}
           // Check if the group actually matched (rm_so != -1)
            if (matches[i].rm_so != -1 && matches[i].rm_eo != -1) {
                // Calculate length
                int length = matches[i].rm_eo - matches[i].rm_so;
                // Print the matched substring using format specifier for length
                printf("Group %d: %.*s\n", i, length, input + matches[i].rm_so);
            }
        }
    } else {
        printf("No match found.\n");
    }

    // Free the memory allocated to the pattern buffer by regcomp
    regfree(&regex);

    return 0;
}

